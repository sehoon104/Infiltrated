<!DOCTYPE html>
<html>
<head>
	<title>Stats</title>
	<meta charset="utf-8">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="style.css">
	<!-- AJAX jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body class="bg-light bg-gradient" onload="loadStats()">

	<div class="container cont">
		<nav class="navbar navbar-dark bg-dark">
			<div class="container-fluid">
		    	<span class="navbar-text" id = "name"></span>
		    	<a href="menu.html" class="btn btn-outline-light">RETURN TO MENU</a>
			</div>
		</nav>
		<div id="lb-page-1">
			<h1 class="text-center">-- PLAYER STATS --</h1>
			
			<table id="lb-table" class="table">
				<thead>
			    	<tr class="table-dark">
			    		<th scope="col">Name</th>
			    		<th scope="col">As Agent</th>
			    		<th scope="col">As Hacker</th>
			    		<th scope="col">Games Played</th>
			    	</tr>
				</thead>
				<tbody>
					<tr>
			    		<td id = "username" ></td>
			    		<td id = "agentWins"></td>
			    		<td id = "hackerWins"></td>
			    		<td id = "gamesPlayed"></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>

	<script type="text/javascript">
		
		// add row: 
		

		// the underlines can be deleleted once actual *reload data* code is written
		document.querySelector("#opt1-label").style.textDecoration = "underline";
		document.querySelector("#lb-form").onchange = function(event){
			if(document.querySelector("#opt1").checked){
				document.querySelector("#opt1-label").style.textDecoration = "underline";
				document.querySelector("#opt2-label").style.textDecoration = "none";
			} else{
				document.querySelector("#opt2-label").style.textDecoration = "underline";
				document.querySelector("#opt1-label").style.textDecoration = "none";
			}
		}
		
		async function loadStats(){
			console.log("STATS LOADED");
			
	    	const response = await fetch('LoadStats?username=' + localStorage.getItem('username'));
	    	const data = await response.json();
	    	console.log(data);
	    	document.getElementById("name").innerHTML = data[0];
	    	document.getElementById("username").innerHTML = data[0];
	    	document.getElementById("agentWins").innerHTML = data[6] + "/" + data[4];
	    	document.getElementById("hackerWins").innerHTML = data[5] + "/" + data[3];
	    	document.getElementById("gamesPlayed").innerHTML = data[2];
	    	
			
		}
		// clear table
		// document.querySelector("#lb-table tbody").innerHTML = "";

	</script>

</body>
</html>