<!DOCTYPE html>
<html>
<head>
	<title>Infiltrated</title>
	<meta charset="utf-8">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="style.css">
	<!-- AJAX jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body class="bg-light bg-gradient">

	

	<script type="text/javascript">
		function loginValidation(){
			$.ajax({
				url: "LoginValidation",
				data:{
					username: document.loginform.username.value,
					password: document.loginform.password.value,
				},
				success: function(returnValue){
					var result = $.trim(returnValue);
					console.log(result);
					$("#loginmsg").html(returnValue);
					if(result == "Logged in successfully!"){
						localStorage.setItem('username', document.loginform.username.value);
						console.log("Web page loaded?");
						//$("body").load("game.html");
						window.location.href="game.html";
					}
				}
			})
		}
		
		function guestLogin(){
			window.localStorage.clear();
		}
		// Javascript to change the text into appropriate alerts 
		// document.querySelector("#login-error").innerHTML = "error string";

		// show error
		// document.querySelector("#login-error").style.display = "block";

		// hide error
		// document.querySelector("#login-error").style.display = "hide";

		// (2) Show #login-error if verification failed, else jump to menu.html?guest=false&user=[x]
		// jump
		// window.location.href = "menu.html?guest=false" + [etc];

	</script>
	
	<div class="container">
		<div class="div-form1">
			<h1 class="text-center">-- INFILTRATED --</h1>

			<div id="login-error" class="alert alert-danger hid" role="alert">Login Error Text!</div>
			<!-- (2) -->

			<form id="login-form" name = "loginform">
				<!-- (1) Add form action that enables backend to verify username-password combination -->
				<div><input type="text" class="form-control" placeholder="Username" aria-label="username" name="username" id = "username" required></div>
				<div><input type="password" class="form-control" placeholder="Password" aria-label="password" name="password" id = "password" required></div>
		    	<div class="d-flex justify-content-around">
		    		<a href="register.html" class="btn btn-dark">REGISTER</a>
					<button type="button" onclick = "loginValidation()" class="btn btn-dark">LOGIN</button>
					<a href="menuguest.html" class="btn btn-dark" onclick="guestLogin()">GUEST</a>
				</div>	
				<div id = "loginmsg"><strong></strong></div>
			</form>
		</div>
	</div>

</body>
</html>